# vite 在生产环境对静态资源的处理

当我们将工程打包以后，会发现找不到某个资源。比如说我们在 webpack 打包之后，直接启动 dist 目录下的 index.html 文件，控制台会报错。原因就是没有配置 baseUrl 。

webpack 中，进入 index.html 会发现 script 引入 打包之后 js 的方式就是使用的绝对路径。即 / 开头，而 vite 默认使用的是相对路径 ，即 index.html 中使用的是 ./src/xxx.js。

打包之后的静态资源为什么要有 hash 值结尾。

1、 浏览器是 有缓存机制的 ，只要资源名称不改，那么他就直接使用缓存里面的数据。下次刷新界面的时候，如果是同一个名字，就会直接使用缓存的东西，即 会出现代码改了，但是没有及时更新的情况。因此我们要尽量避免重名的情况。如果这个文件没有被动过，那么这个文件打包之后的名称永远不会改变，即就会走缓存。通过 hash 算法，我们可以更好的操控浏览器的缓存机制。

2、 在打包的时候，其实是 rollup 打包工具在打包。我们可以配置 rollupOptions 和 vite 底层 rollup 配置合并达到想要的打包效果。

详细配置查看 vite 配置